<!doctype html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <title>Generador de PDF Premium - SEMP</title>
    <meta name="description" content="Genera documentos PDF profesionales. VersiÃ³n gratuita con marca de agua o versiÃ³n premium sin marca de agua por $5.00 MXN">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://sdk.mercadopago.com/js/v2"></script>
</head>
<body>
    <!-- Loader overlay -->
    <div id="loader" class="loader-overlay">
        <div class="loader-content">
            <div class="spinner"></div>
            <p>Procesando pago...</p>
        </div>
    </div>

    <div class="container">
        <header>
            <h1><i class="fas fa-file-pdf"></i> Generador de PDF Premium</h1>
            <p class="subtitle">ObtÃ©n tu documento PDF profesional</p>
        </header>

        <!-- Main action buttons -->
        <div class="action-buttons">
            <button type="button" onclick="generarPDFGratuito()" class="btn btn-free">
                <i class="fas fa-file-pdf"></i>
                Descargar PDF GRATIS
                <small>(con marca de agua)</small>
            </button>

            <div class="premium-section">
                <div class="price-tag">
                    <span class="currency">$</span>
                    <span class="amount">5.00</span>
                    <span class="currency">MXN</span>
                </div>
                
                <button type="button" id="payButton" onclick="initiateMercadoPagoPayment()" class="btn btn-premium">
                    <i class="fas fa-credit-card"></i>
                    Comprar PDF Premium
                    <small>(sin marca de agua)</small>
                </button>

                <!-- MercadoPago button container (will be populated dynamically) -->
                <div id="mercadopago-button" style="display: none;"></div>
            </div>

            <!-- Test button (temporary) -->
            <button type="button" onclick="generarPDF()" class="btn btn-test">
                <i class="fas fa-flask"></i>
                ðŸ§ª PRUEBAS NUCLEARES (TEMPORAL)
            </button>
        </div>

        <!-- Notifications -->
        <div id="notificacionExito" class="notification success" style="display: none;">
            <i class="fas fa-check-circle"></i>
            <div>
                <strong>Â¡Felicidades!</strong>
                <p>Tu pago fue exitoso. Ahora ya puedes descargar tu PDF Premium sin marca de agua.</p>
            </div>
        </div>

        <div id="notificacionErrorPago" class="notification error" style="display: none;">
            <i class="fas fa-times-circle"></i>
            <div>
                <strong>Error en el pago</strong>
                <p>Tu operaciÃ³n de pago fue interrumpida o rechazada. Por favor, intÃ©ntalo de nuevo si deseas el PDF Premium.</p>
            </div>
        </div>

        <div id="notificacionPendiente" class="notification warning" style="display: none;">
            <i class="fas fa-clock"></i>
            <div>
                <strong>Pago pendiente</strong>
                <p>Tu pago estÃ¡ siendo procesado. Te notificaremos cuando se complete.</p>
            </div>
        </div>

        <!-- Premium download button -->
        <div class="premium-download">
            <button type="button" id="btnPremium" onclick="generarPDFPremium()" class="btn btn-gold" style="display: none;">
                <i class="fas fa-star"></i>
                Descargar PDF PREMIUM
                <small>(sin marca de agua)</small>
            </button>
        </div>

        <!-- Footer -->
        <footer>
            <p>Powered by <strong>SEMP</strong> - Secure PDF Generation</p>
            <small>Pagos seguros procesados por Mercado Pago</small>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script>
        window.jspdf = window.jspdf || {};
        // Global variable for premium access control
        let isPremiumUnlocked = false;
        
        // Backend API URL - change this to your deployed backend URL
        const API_BASE_URL = window.location.hostname === 'localhost' 
            ? 'http://localhost:8000' 
            : 'https://your-backend-url.herokuapp.com'; // Change this to your actual backend URL
    </script>
    <script src="script.js"></script>
    <script src="script2.js"></script>
    <script src="mercadopago_status_handler.js"></script>
</body>
</html>
